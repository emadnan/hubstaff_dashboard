"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1159],{51159:function(e,t,n){n.r(t);var r=n(74165),o=n(15861),i=(n(93433),n(29439)),a=n(78983),c=n(72791),s=n(87309),l=n(42535),u=n(77128),d=n(13400),f=n(27247),m=n(41286),h=n(50587),p=n(19658),x=n(80184),g="http://10.3.3.80";t.default=function(){var e=(0,c.useState)(""),t=(0,i.Z)(e,2),n=t[0],v=t[1],y=(0,c.useState)(""),j=(0,i.Z)(y,2),Z=j[0],b=j[1],T=(0,c.useState)([]),S=(0,i.Z)(T,2),C=S[0],N=S[1],k=(0,c.useState)([]),w=(0,i.Z)(k,2),_=w[0],z=w[1],O=(0,c.useState)([]),E=(0,i.Z)(O,2),A=E[0],P=(E[1],[]),B=JSON.parse(localStorage.getItem("user-info")),M=B.permissions.map((function(e){return{name:e.name}})).some((function(e){return"Create_Team"===e.name})),U={color:"white",backgroundColor:"#0070FF ",padding:"15px",fontFamily:"Arial",textAlign:"center",alignSelf:"flex-end"},H={position:"fixed",top:"25%",left:"40%"},F={backgroundColor:"white "},V={position:"fixed",top:"10%",left:"55%",transform:"translateX(-50%)"},D=(0,c.useState)(!1),I=(0,i.Z)(D,2),W=I[0],G=I[1],J=(0,c.useState)(!1),L=(0,i.Z)(J,2),R=L[0],X=L[1],Y=(0,c.useState)(!1),q=(0,i.Z)(Y,2),K=q[0],Q=q[1],$=function(e){!function(e){fetch("".concat(g,"/api/getTeam/").concat(e)).then((function(e){return e.json()})).then((function(e){z(e.Team),v(e.Team[0].team_name),b(e.Team[0].description)})).catch((function(e){return console.log(e)}))}(e),Q(e)},ee=(0,c.useState)(!1),te=(0,i.Z)(ee,2),ne=te[0],re=te[1],oe=(0,c.useState)(!1),ie=(0,i.Z)(oe,2),ae=ie[0],ce=ie[1];(0,c.useEffect)((function(){if(ae){var e=setTimeout((function(){ce(!1)}),3e3);return function(){return clearTimeout(e)}}}),[ae]);var se=(0,c.useState)(!1),le=(0,i.Z)(se,2),ue=le[0],de=le[1];(0,c.useEffect)((function(){if(ue){var e=setTimeout((function(){de(!1)}),3e3);return function(){return clearTimeout(e)}}}),[ue]);var fe=(0,c.useState)(!1),me=(0,i.Z)(fe,2),he=me[0],pe=me[1];(0,c.useEffect)((function(){if(he){var e=setTimeout((function(){pe(!1)}),3e3);return function(){return clearTimeout(e)}}}),[he]);var xe=(0,c.useState)(!1),ge=(0,i.Z)(xe,2),ve=ge[0],ye=ge[1];(0,c.useEffect)((function(){if(ve){var e=setTimeout((function(){ye(!1)}),3e3);return function(){return clearTimeout(e)}}}),[ve]);var je=(0,c.useState)(!1),Ze=(0,i.Z)(je,2),be=Ze[0],Te=Ze[1];(0,c.useEffect)((function(){if(be){var e=setTimeout((function(){Te(!1)}),3e3);return function(){return clearTimeout(e)}}}),[be]);var Se=(0,c.useState)(!1),Ce=(0,i.Z)(Se,2),Ne=Ce[0],ke=Ce[1];(0,c.useEffect)((function(){if(Ne){var e=setTimeout((function(){ke(!1)}),3e3);return function(){return clearTimeout(e)}}}),[Ne]);var we=(0,c.useState)(!1),_e=(0,i.Z)(we,2),ze=_e[0],Oe=_e[1];(0,c.useEffect)((function(){if(ze){var e=setTimeout((function(){Oe(!1)}),3e3);return function(){return clearTimeout(e)}}}),[ze]);var Ee=(0,c.useState)(!1),Ae=(0,i.Z)(Ee,2),Pe=Ae[0],Be=Ae[1];(0,c.useEffect)((function(){if(Pe){var e=setTimeout((function(){Be(!1)}),3e3);return function(){return clearTimeout(e)}}}),[Pe]),(0,c.useEffect)((function(){Me()}),[]);function Me(){fetch("".concat(g,"/api/get_teams")).then((function(e){return e.json()})).then((function(e){1===B.Users.role?P=e.Teams:3===B.Users.role&&(P=e.Teams.filter((function(e){return e.team_company_id===B.Users.company_id}))),N(P)})).catch((function(e){return console.log(e)}))}function Ue(){return(Ue=(0,o.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={team_name:n,team_company_id:B.Users.company_id,description:Z},e.next=3,fetch("".concat(g,"/api/add_team"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){e.ok?(ce(!0),Me()):de(!0)})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(){return(He=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"/api/delete_team"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}).then((function(e){e.ok?(pe(!0),Me()):ye(!0)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(){return(Fe=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"/api/updateteam"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,team_name:n,description:Z,team_company_id:B.Users.company_id})}).then((function(e){e.ok?(Te(!0),Me()):ke(!0)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(){return(Ve=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"/api/role-permissions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({role_id:t,permissions:A})}).then((function(e){e.ok?Oe(!0):Be(!0)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-md 6",children:(0,x.jsx)("h3",{children:"Teams"})}),(0,x.jsx)("div",{className:"col-md 6",children:M?(0,x.jsx)(s.ZP,{className:"btn btn-primary",style:{float:"right",padding:"2px",width:"120px",backgroundColor:"white",fontWeight:"bold",color:"#0070ff"},onClick:function(){G(!0)},children:"Add Team"}):null})]}),(0,x.jsx)("br",{}),(0,x.jsxs)(a.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,style:{marginTop:"20px"},children:[(0,x.jsxs)(a.V,{color:"light",children:[(0,x.jsxs)(a.T6,{children:[(0,x.jsx)(a.is,{className:"text-center",style:U,children:"Sr/No"}),(0,x.jsx)(a.is,{className:"text-center",style:U,children:"Team Name"}),(0,x.jsx)(a.is,{className:"text-center",style:U,children:"Assign Team"}),(0,x.jsx)(a.is,{className:"text-center",style:U,children:"Actions"})]}),C.map((function(e,t){return(0,x.jsxs)(a.T6,{children:[(0,x.jsx)(a.is,{className:"text-center",style:F,children:t+1}),(0,x.jsx)(a.is,{className:"text-center",style:F,children:e.team_name}),(0,x.jsx)(a.is,{className:"text-center",style:F,children:(0,x.jsx)(d.Z,{"aria-label":"Assign Team",onClick:function(){return t=e.id,void re(t);var t},children:(0,x.jsx)(h.Z,{htmlColor:"#28B463"})})}),(0,x.jsxs)(a.is,{className:"text-center",style:F,children:[(0,x.jsx)(d.Z,{"aria-label":"Update",onClick:function(){return $(e.id)},children:(0,x.jsx)(m.Z,{htmlColor:"#28B463"})}),(0,x.jsx)(d.Z,{"aria-label":"Delete",onClick:function(){return t=e.id,void X(t);var t},children:(0,x.jsx)(f.Z,{htmlColor:"#FF0000"})})]})]},e.id)}))]}),(0,x.jsxs)(a.NR,{children:[(0,x.jsxs)(l.Z,{title:"Add a Team",open:W,onOk:function(){!function(){Ue.apply(this,arguments)}(),G(!1),v(""),b("")},onCancel:function(){G(!1),v(""),b("")},okButtonProps:{style:{background:"blue"}},style:H,maskClosable:!1,children:[(0,x.jsx)("br",{}),(0,x.jsxs)("div",{className:"form-outline mb-3",children:[(0,x.jsx)("label",{children:"Team Name"}),(0,x.jsx)("input",{type:"text",value:n,onChange:function(e){return v(e.target.value)},className:"form-control form-control-lg",placeholder:"Enter Team Name"})]}),(0,x.jsxs)("div",{className:"form-outline mb-3",children:[(0,x.jsx)("label",{children:"Description"}),(0,x.jsx)("input",{type:"text",value:Z,onChange:function(e){return b(e.target.value)},className:"form-control form-control-lg",placeholder:"Enter Description"})]})]}),(0,x.jsxs)(l.Z,{title:"Update a Team",open:K,onOk:function(){!function(e){Fe.apply(this,arguments)}(K),Q(!1),v(""),b("")},onCancel:function(){Q(!1),v(""),b("")},okButtonProps:{style:{background:"blue"}},style:H,maskClosable:!1,children:[(0,x.jsx)("br",{}),_.map((function(e){return(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"form-outline mb-3",children:[(0,x.jsx)("label",{children:"Team Name"}),(0,x.jsx)("input",{type:"text",defaultValue:e.team_name,onChange:function(e){return v(e.target.value)},className:"form-control form-control-lg",placeholder:"Enter Team Name"})]}),(0,x.jsxs)("div",{className:"form-outline mb-3",children:[(0,x.jsx)("label",{children:"Description"}),(0,x.jsx)("input",{type:"text",defaultValue:e.description,onChange:function(e){return b(e.target.value)},className:"form-control form-control-lg",placeholder:"Enter Description"})]})]},e.id)}))]}),(0,x.jsxs)(l.Z,{title:"Assign Users",open:ne,onOk:function(){!function(e){Ve.apply(this,arguments)}(ne),re(!1)},onCancel:function(){re(!1)},okButtonProps:{style:{background:"blue"}},children:[(0,x.jsx)("br",{}),(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col md-2 text-center",children:(0,x.jsx)("h6",{children:"Sr/No"})}),(0,x.jsx)("div",{className:"col md-3"}),(0,x.jsx)("div",{className:"col md-2 text-center",children:(0,x.jsx)("h6",{children:"Users"})}),(0,x.jsx)("div",{className:"col md-3"}),(0,x.jsx)("div",{className:"col md-2 text-center",children:(0,x.jsx)("h6",{style:{display:"flex",justifyContent:"flex-end",float:"right"},children:"Select"})}),"\xa0",(0,x.jsx)(u.Z,{})]})]}),(0,x.jsx)(l.Z,{title:"Are you sure you want to delete?",open:R,onOk:function(){!function(e){He.apply(this,arguments)}(R),X(!1)},onCancel:function(){X(!1)},okButtonProps:{style:{background:"blue"}},style:H}),ae&&(0,x.jsx)(p.Z,{onClose:function(){ce(!1)},severity:"success",style:V,children:"Team Added Successfully"}),ue&&(0,x.jsx)(p.Z,{onClose:function(){de(!1)},severity:"error",style:V,children:"Failed to Add Team"}),he&&(0,x.jsx)(p.Z,{onClose:function(){pe(!1)},severity:"success",style:V,children:"Team Deleted Successfully"}),ve&&(0,x.jsx)(p.Z,{onClose:function(){ye(!1)},severity:"error",style:V,children:"Failed to Delete Team"}),be&&(0,x.jsx)(p.Z,{onClose:function(){Te(!1)},severity:"success",style:V,children:"Team Updated Successfully"}),Ne&&(0,x.jsx)(p.Z,{onClose:function(){ke(!1)},severity:"error",style:V,children:"Failed to Update Team"}),ze&&(0,x.jsx)(p.Z,{onClose:function(){Oe(!1)},severity:"success",style:V,children:"Users Assigned Successfully"}),Pe&&(0,x.jsx)(p.Z,{onClose:function(){Be(!1)},severity:"error",style:V,children:"Failed to Assign Users"})]})]})]})}},50587:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z"}),"AssignmentInd");t.Z=a},27247:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=a},41286:function(e,t,n){var r=n(64836);t.Z=void 0;var o=r(n(45649)),i=n(80184),a=(0,o.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.Z=a},77128:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(4942),o=n(29439),i=n(81694),a=n.n(i),c=n(72791),s=n(71929),l=n(55564),u=n(89922),d=n(67521),f=function(e){var t,n=e.componentCls,o=e.sizePaddingEdgeHorizontal,i=e.colorSplit,a=e.lineWidth;return(0,r.Z)({},n,Object.assign(Object.assign({},(0,d.Wf)(e)),(t={borderBlockStart:"".concat(a,"px solid ").concat(i),"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:"0 ".concat(e.dividerVerticalGutterMargin,"px"),verticalAlign:"middle",borderTop:0,borderInlineStart:"".concat(a,"px solid ").concat(i)},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:"".concat(e.dividerHorizontalGutterMargin,"px 0")}},(0,r.Z)(t,"&-horizontal".concat(n,"-with-text"),{display:"flex",alignItems:"center",margin:"".concat(e.dividerHorizontalWithTextGutterMargin,"px 0"),color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:"0 ".concat(i),"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:"".concat(a,"px solid transparent"),borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}}),(0,r.Z)(t,"&-horizontal".concat(n,"-with-text-left"),{"&::before":{width:"5%"},"&::after":{width:"95%"}}),(0,r.Z)(t,"&-horizontal".concat(n,"-with-text-right"),{"&::before":{width:"95%"},"&::after":{width:"5%"}}),(0,r.Z)(t,"".concat(n,"-inner-text"),{display:"inline-block",padding:"0 1em"}),(0,r.Z)(t,"&-dashed",{background:"none",borderColor:i,borderStyle:"dashed",borderWidth:"".concat(a,"px 0 0")}),(0,r.Z)(t,"&-horizontal".concat(n,"-with-text").concat(n,"-dashed"),{"&::before, &::after":{borderStyle:"dashed none none"}}),(0,r.Z)(t,"&-vertical".concat(n,"-dashed"),{borderInlineStart:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0}),(0,r.Z)(t,"&-plain".concat(n,"-with-text"),{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize}),(0,r.Z)(t,"&-horizontal".concat(n,"-with-text-left").concat(n,"-no-default-orientation-margin-left"),(0,r.Z)({"&::before":{width:0},"&::after":{width:"100%"}},"".concat(n,"-inner-text"),{paddingInlineStart:o})),(0,r.Z)(t,"&-horizontal".concat(n,"-with-text-right").concat(n,"-no-default-orientation-margin-right"),(0,r.Z)({"&::before":{width:"100%"},"&::after":{width:0}},"".concat(n,"-inner-text"),{paddingInlineEnd:o})),t)))},m=(0,l.Z)("Divider",(function(e){var t=(0,u.TS)(e,{dividerVerticalGutterMargin:e.marginXS,dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG});return[f(t)]}),{sizePaddingEdgeHorizontal:0}),h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var p=function(e){var t,n=c.useContext(s.E_),i=n.getPrefixCls,l=n.direction,u=e.prefixCls,d=e.type,f=void 0===d?"horizontal":d,p=e.orientation,x=void 0===p?"center":p,g=e.orientationMargin,v=e.className,y=e.rootClassName,j=e.children,Z=e.dashed,b=e.plain,T=h(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain"]),S=i("divider",u),C=m(S),N=(0,o.Z)(C,2),k=N[0],w=N[1],_=x.length>0?"-".concat(x):x,z=!!j,O="left"===x&&null!=g,E="right"===x&&null!=g,A=a()(S,w,"".concat(S,"-").concat(f),(t={},(0,r.Z)(t,"".concat(S,"-with-text"),z),(0,r.Z)(t,"".concat(S,"-with-text").concat(_),z),(0,r.Z)(t,"".concat(S,"-dashed"),!!Z),(0,r.Z)(t,"".concat(S,"-plain"),!!b),(0,r.Z)(t,"".concat(S,"-rtl"),"rtl"===l),(0,r.Z)(t,"".concat(S,"-no-default-orientation-margin-left"),O),(0,r.Z)(t,"".concat(S,"-no-default-orientation-margin-right"),E),t),v,y),P=Object.assign(Object.assign({},O&&{marginLeft:g}),E&&{marginRight:g});return k(c.createElement("div",Object.assign({className:A},T,{role:"separator"}),j&&"vertical"!==f&&c.createElement("span",{className:"".concat(S,"-inner-text"),style:P},j)))}}}]);
//# sourceMappingURL=1159.437865f5.chunk.js.map