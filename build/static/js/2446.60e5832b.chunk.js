"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2446],{92446:function(e,n,t){t.r(n);var r=t(74165),s=t(15861),i=t(29439),o=t(78983),c=t(72791),a=t(87309),l=t(42535),u=t(13400),f=t(27247),d=t(41286),m=t(19658),h=t(80184),p="http://10.3.3.80";n.default=function(){var e=(0,c.useState)(""),n=(0,i.Z)(e,2),t=n[0],x=n[1],y=JSON.parse(localStorage.getItem("user-info")).permissions.map((function(e){return{name:e.name}})),j=y.some((function(e){return"Create_Permission"===e.name})),v=y.some((function(e){return"Update_Permission"===e.name})),Z=y.some((function(e){return"Delete_Permission"===e.name})),b={position:"fixed",top:"10%",left:"55%",transform:"translateX(-50%)"},g={color:"white",backgroundColor:"#0070FF ",padding:"15px",fontFamily:"Arial",textAlign:"center",alignSelf:"flex-end"},k={backgroundColor:"white "},C=(0,c.useState)(!1),S=(0,i.Z)(C,2),P=S[0],N=S[1],T=(0,c.useState)(!1),_=(0,i.Z)(T,2),w=_[0],E=_[1],O=(0,c.useState)(!1),F=(0,i.Z)(O,2),A=F[0],z=F[1],B=function(e){!function(e){fetch("".concat(p,"/api/get-permissions-by-id/").concat(e)).then((function(e){return e.json()})).then((function(e){he(e.permissions),x(e.permissions[0].name)})).catch((function(e){return console.log(e)}))}(e),z(e)},D=(0,c.useState)(!1),J=(0,i.Z)(D,2),M=J[0],U=J[1];(0,c.useEffect)((function(){if(M){var e=setTimeout((function(){U(!1)}),3e3);return function(){return clearTimeout(e)}}}),[M]);var V=(0,c.useState)(!1),H=(0,i.Z)(V,2),L=H[0],I=H[1];(0,c.useEffect)((function(){if(L){var e=setTimeout((function(){I(!1)}),3e3);return function(){return clearTimeout(e)}}}),[L]);var R=(0,c.useState)(!1),W=(0,i.Z)(R,2),X=W[0],q=W[1];(0,c.useEffect)((function(){if(X){var e=setTimeout((function(){q(!1)}),3e3);return function(){return clearTimeout(e)}}}),[X]);var G=(0,c.useState)(!1),K=(0,i.Z)(G,2),Q=K[0],Y=K[1];(0,c.useEffect)((function(){if(Q){var e=setTimeout((function(){Y(!1)}),3e3);return function(){return clearTimeout(e)}}}),[Q]);var $=(0,c.useState)(!1),ee=(0,i.Z)($,2),ne=ee[0],te=ee[1];(0,c.useEffect)((function(){if(ne){var e=setTimeout((function(){te(!1)}),3e3);return function(){return clearTimeout(e)}}}),[ne]);var re=(0,c.useState)(!1),se=(0,i.Z)(re,2),ie=se[0],oe=se[1];(0,c.useEffect)((function(){if(ie){var e=setTimeout((function(){oe(!1)}),3e3);return function(){return clearTimeout(e)}}}),[ie]);var ce=(0,c.useState)([]),ae=(0,i.Z)(ce,2),le=ae[0],ue=ae[1],fe=(0,c.useState)([]),de=(0,i.Z)(fe,2),me=de[0],he=de[1];function pe(){fetch("".concat(p,"/api/getpermissions")).then((function(e){return e.json()})).then((function(e){return ue(e.permissions)})).catch((function(e){return console.log(e)}))}function xe(){return(xe=(0,s.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:t},e.next=3,fetch("".concat(p,"/api/addpermission"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){e.ok?(U(!0),pe()):I(!0)})).catch((function(e){console.error(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/api/delete-permission"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n})}).then((function(e){e.ok?(q(!0),pe()):Y(!0)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){return(je=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/api/update-permission"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n,name:t})}).then((function(e){e.ok?(te(!0),pe()):oe(!0)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,c.useEffect)((function(){pe()}),[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-md 6",children:(0,h.jsx)("h3",{children:"Permissions"})}),(0,h.jsx)("div",{className:"col-md 6",children:j?(0,h.jsx)(a.ZP,{className:"btn btn-primary",style:{float:"right",padding:"2px",width:"140px",backgroundColor:"white",fontWeight:"bold",color:"#0070ff"},onClick:function(){N(!0)},children:"Add Permission"}):null})]}),(0,h.jsx)("br",{}),(0,h.jsxs)(o.Sx,{align:"middle",className:"mb-0 border",hover:!0,responsive:!0,style:{marginTop:"20px"},children:[(0,h.jsxs)(o.V,{color:"light",children:[(0,h.jsxs)(o.T6,{children:[(0,h.jsx)(o.is,{className:"text-center",style:g,children:"Sr/No"}),(0,h.jsx)(o.is,{className:"text-center",style:g,children:"Permission Name"}),v||Z?(0,h.jsx)(o.is,{className:"text-center",style:g,children:"Actions"}):null]}),le.map((function(e,n){return(0,h.jsxs)(o.T6,{children:[(0,h.jsx)(o.is,{className:"text-center",style:k,children:n+1}),(0,h.jsx)(o.is,{className:"text-center",style:k,children:e.name}),(0,h.jsxs)(o.is,{className:"text-center",style:k,children:[(0,h.jsx)(u.Z,{"aria-label":"update",onClick:function(){return B(e.id)},children:(0,h.jsx)(d.Z,{htmlColor:"#28B463"})}),(0,h.jsx)(u.Z,{"aria-label":"delete",onClick:function(){return n=e.id,void E(n);var n},children:(0,h.jsx)(f.Z,{htmlColor:"#FF0000"})})]})]},e.id)}))]}),(0,h.jsxs)(o.NR,{children:[(0,h.jsxs)(l.Z,{title:"Add a Permission",open:P,onOk:function(){!function(){xe.apply(this,arguments)}(),N(!1),x("")},okButtonProps:{style:{background:"blue"}},onCancel:function(){N(!1),x("")},maskClosable:!1,children:[(0,h.jsx)("br",{}),(0,h.jsxs)("div",{className:"form-outline mb-3",children:[(0,h.jsx)("label",{children:"Permission"}),(0,h.jsx)("input",{type:"text",value:t,onChange:function(e){return x(e.target.value)},className:"form-control form-control-lg",placeholder:"Enter Permission Name"})]})]}),(0,h.jsxs)(l.Z,{title:"Update a Permission",open:A,onOk:function(){!function(e){je.apply(this,arguments)}(A),z(!1)},okButtonProps:{style:{background:"blue"}},onCancel:function(){z(!1)},maskClosable:!1,children:[(0,h.jsx)("br",{}),me.map((function(e){return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"form-outline mb-3",children:[(0,h.jsx)("label",{children:"Permission"}),(0,h.jsx)("input",{type:"text",value:t,onChange:function(e){return x(e.target.value)},className:"form-control form-control-lg",placeholder:"Enter Permission Name"})]})},e.id)}))]}),(0,h.jsx)(l.Z,{title:"Are you sure you want to delete?",open:w,onOk:function(){!function(e){ye.apply(this,arguments)}(w),E(!1)},okButtonProps:{style:{background:"blue"}},onCancel:function(){E(!1)},style:{position:"fixed",top:"25%",left:"40%"}}),M&&(0,h.jsx)(m.Z,{onClose:function(){U(!1)},severity:"success",style:b,children:"Permission Added Successfully"}),L&&(0,h.jsx)(m.Z,{onClose:function(){I(!1)},severity:"error",style:b,children:"Failed to Add Permission"}),X&&(0,h.jsx)(m.Z,{onClose:function(){q(!1)},severity:"success",style:b,children:"Permission Deleted Successfully"}),Q&&(0,h.jsx)(m.Z,{onClose:function(){Y(!1)},severity:"error",style:b,children:"Failed to Delete Permission"}),ne&&(0,h.jsx)(m.Z,{onClose:function(){te(!1)},severity:"success",style:b,children:"Permission Updated Successfully"}),ie&&(0,h.jsx)(m.Z,{onClose:function(){oe(!1)},severity:"error",style:b,children:"Failed to Update Permission"})]})]})]})}},27247:function(e,n,t){var r=t(64836);n.Z=void 0;var s=r(t(45649)),i=t(80184),o=(0,s.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=o},41286:function(e,n,t){var r=t(64836);n.Z=void 0;var s=r(t(45649)),i=t(80184),o=(0,s.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");n.Z=o}}]);
//# sourceMappingURL=2446.60e5832b.chunk.js.map